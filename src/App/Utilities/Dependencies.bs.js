// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE
'use strict';

var Ley_List$OptolithClient = require("../../Data/Ley_List.bs.js");
var Ley_Option$OptolithClient = require("../../Data/Ley_Option.bs.js");

function flattenSkill(getValueForTargetId, id, dependencies) {
  return Ley_Option$OptolithClient.mapOption((function (dep) {
                var match = dep.target;
                if (match.tag) {
                  var isMatchedByOtherEntry = Ley_List$OptolithClient.Foldable.any((function (value) {
                          return value >= dep.value;
                        }), Ley_List$OptolithClient.map(getValueForTargetId, Ley_List$OptolithClient.$$delete(id, match[0])));
                  if (isMatchedByOtherEntry) {
                    return ;
                  } else {
                    return dep.value;
                  }
                } else {
                  return dep.value;
                }
              }), dependencies);
}

function flattenActivatableSkill(getValueForTargetId, id, dependencies) {
  return Ley_Option$OptolithClient.mapOption((function (dep) {
                var match = dep.target;
                if (match.tag) {
                  var isMatchedByOtherEntry = Ley_List$OptolithClient.Foldable.any((function (value) {
                          var match = dep.value;
                          if (value) {
                            if (match) {
                              return value[0] >= match[0];
                            } else {
                              return false;
                            }
                          } else if (match) {
                            return false;
                          } else {
                            return true;
                          }
                        }), Ley_List$OptolithClient.map(getValueForTargetId, Ley_List$OptolithClient.$$delete(id, match[0])));
                  if (isMatchedByOtherEntry) {
                    return ;
                  } else {
                    return dep.value;
                  }
                } else {
                  return dep.value;
                }
              }), dependencies);
}

exports.flattenSkill = flattenSkill;
exports.flattenActivatableSkill = flattenActivatableSkill;
/* No side effect */
